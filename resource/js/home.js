"use strict";function ajax(t){var e=new XMLHttpRequest;e.open(t.type||"get",t.url,t.asnyc||1),t.data&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){if(4===e.readyState){var n=t.dataType&&"text"===t.dataType?e.responseText:JSON.parse(e.responseText);200===e.status?t.success&&t.success(n):t.fail&&t.fail(n)}},e.send(t.data||null)}function Banner(t){function e(t){var e,n,a,s,d,l,u,f,m,h,v=document.createElement("a");v.href=t.anchorHref,v.style.backgroundImage="url("+t.imageUrl+")",v.title=t.name,v.addEventListener("touchstart",function(t){clearInterval(o),this.classList.remove("current"),e=t.touches[0].clientX,n=Date.now()},0),v.addEventListener("touchmove",function(t){l=t.touches[0].clientX-e,d=l<0,v.style.left=l+"px",d?(g[i(0)].getDOM().style.left=null,g[i(1)].getDOM().style.left=p+l+"px"):(g[i(0)].getDOM().style.left=l-p+"px",g[i(1)].getDOM().style.left=null)},0),v.addEventListener("touchend",function(t){a=t.changedTouches[0].clientX,s=Date.now(),l=a-e,d=l>0,l=Math.abs(l),u=s-n,l<p/2&&u>=300?(d?g[i(0)].getDOM().classList.add("rtl"):g[i(1)].getDOM().classList.add("ltr"),f="init"):d&&(l>=p/2||u<300)?(g[i(0)].getDOM().classList.add("init"),f="ltr",h=1):(g[i(1)].getDOM().classList.add("init"),f="rtl",h=1),this.classList.add(f),o=c()},0),v.addEventListener("animationend",function(t){m=t.animationName,~["init","ltr","rtl","previous"].indexOf(m)&&(this.classList.remove(m),this.style.left="init"===m?0:null,"ltr"===m?h&&r(i(0),1):"rtl"===m&&h&&r(i(1),1)),h=0}),this.getDOM=function(){return v}}function n(){var e,n,i=document.createDocumentFragment(),r=document.createDocumentFragment(),c=document.createElement("div");return c.className="indicator",t.map(function(t,i){g.push(a(r,e,Object.assign({index:i},t))),v.push(s(c,n,i))}),i.appendChild(r),i.appendChild(c),i}function a(t,n,a){return n=new e(a),t.appendChild(n.getDOM()),n}function s(t,e,n){return e=document.createElement("em"),e.appendChild(document.createTextNode(n+1)),e.addEventListener("touchstart",function(){clearInterval(o)}),e.addEventListener("touchend",function(){o=c(),r(n)},0),t.appendChild(e),e}function i(t){return[(m>0?m:u)-1,m<u-1?m+1:0][t]}function r(t,e){f=m,m=t,h=i(m,1),e||(g[f].getDOM().classList.remove("current"),g[f].getDOM().classList.add("previous"),g[m].getDOM().classList.add("current")),v[f].classList.remove("current"),v[m].classList.add("current")}function c(){return setInterval(function(){r(i(1))},6e3)}function d(){l.appendChild(n()),g[m].getDOM().classList.add("current"),v[m].classList.add("current"),o=c()}var o,l=t.position,t=t.option,u=t.length,p=l.offsetWidth,f=u-1,m=0,h=1,g=[],v=[];d()}document.documentElement.style.fontSize=window.innerWidth/16+"px";var banner=document.querySelector(".banner");ajax({url:"http://www.ikindness.cn/api/test/get",success:function(t){new Banner({position:banner,option:t.data})}});