"use strict";function ajax(t){function e(t){var e=[];for(var n in t)e.push("&"+n+"="+t[n]);return e.join("").slice(1)}function n(t){"function"==typeof p&&p(t)}function i(t){"function"==typeof m&&m(t)}function a(t){"function"==typeof g&&g(t)}function s(){}function o(){}function c(){}function r(){var t=l&&"text"===l?u.responseText:JSON.parse(u.responseText);200===u.status?i(t):a(t)}var u=new XMLHttpRequest,d=t.type,l=t.dataType,f=e(t.data),p=t.loading,m=t.success,g=t.error;u.onreadystatechange=function(){n(u.readyState),[,s,o,c,r][u.readyState]()},u.open(d||"get",t.url+("post"===d?"":f?"?"+f:""),t.asnyc||1),f&&"post"===d&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(f&&"post"===d?f:null)}function Banner(t){function e(t){var e,n,i,a,r,d,l,p,m,g,v=document.createElement("a");v.href=t.anchorHref,v.style.backgroundImage="url("+t.imageUrl+")",v.title=t.name,v.addEventListener("touchstart",function(t){clearInterval(u),this.classList.remove("current"),e=t.touches[0].clientX,n=Date.now()},0),v.addEventListener("touchmove",function(t){d=t.touches[0].clientX-e,r=d<0,v.style.left=d+"px",r?(h[s(0)].getDOM().style.left=null,h[s(1)].getDOM().style.left=f+d+"px"):(h[s(0)].getDOM().style.left=d-f+"px",h[s(1)].getDOM().style.left=null)},0),v.addEventListener("touchend",function(t){i=t.changedTouches[0].clientX,a=Date.now(),d=i-e,r=d>0,d=Math.abs(d),l=a-n,d<f/2&&l>=300?(r?h[s(0)].getDOM().classList.add("rtl"):h[s(1)].getDOM().classList.add("ltr"),p="init"):r&&(d>=f/2||l<300)?(h[s(0)].getDOM().classList.add("init"),p="ltr",g=1):(h[s(1)].getDOM().classList.add("init"),p="rtl",g=1),this.classList.add(p),u=c()},0),v.addEventListener("animationend",function(t){m=t.animationName,~["init","ltr","rtl","previous"].indexOf(m)&&(this.classList.remove(m),this.style.left="init"===m?0:null,"ltr"===m?g&&o(s(0),1):"rtl"===m&&g&&o(s(1),1)),g=0}),this.getDOM=function(){return v}}function n(){var e,n,s=document.createDocumentFragment(),o=document.createDocumentFragment(),c=document.createElement("div");return c.className="indicator",t.map(function(t,s){h.push(i(o,e,Object.assign({index:s},t))),v.push(a(c,n,s))}),s.appendChild(o),s.appendChild(c),s}function i(t,n,i){return n=new e(i),t.appendChild(n.getDOM()),n}function a(t,e,n){return e=document.createElement("em"),e.appendChild(document.createTextNode(n+1)),e.addEventListener("touchstart",function(t){clearInterval(u)}),e.addEventListener("touchend",function(){u=c(),o(n)},0),t.appendChild(e),e}function s(t){return[(m>0?m:l)-1,m<l-1?m+1:0][t]}function o(t,e){p=m,m=t,g=s(m,1),e||(h[p].getDOM().classList.remove("current"),h[p].getDOM().classList.add("previous"),h[m].getDOM().classList.add("current")),v[p].classList.remove("current"),v[m].classList.add("current")}function c(){return setInterval(function(){o(s(1))},4e3)}function r(){d.appendChild(n()),h[m].getDOM().style.left=0,v[m].classList.add("current"),u=c()}var u,d=t.position,t=t.option,l=t.length,f=d.offsetWidth,p=l-1,m=0,g=1,h=[],v=[];r()}document.documentElement.style.fontSize=window.innerWidth/20+"px";var banner=document.querySelector(".banner"),loading=document.querySelector(".loading");ajax({url:"http://www.ikindness.cn/api/test/get",success:function(t){new Banner({position:banner,option:t.data})},loading:function(t){t>>1&&loading.classList.remove("step"+(t-1)),loading.classList.add("step"+t)}});