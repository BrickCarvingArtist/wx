function Random(e){function t(){function e(e){var t=document.querySelector(".loader");t.classList.remove("hidden");var n,r=0,o=t.querySelector(".number"),i=t.querySelector(".progress"),c=i.offsetWidth,u=i.querySelector(".inner"),a=setInterval(function(){o.innerHTML=r=Math.min(100,r+=Math.ceil(5*Math.random())),u.style.width=c/100*r+"px",100===r&&(clearInterval(a),n=setTimeout(function(){clearTimeout(n),t.classList.add("hidden"),e()},500))},50)}function t(){var t,c,a=l.querySelector(".btn.start"),s=l.querySelector(".ipt-txt.congrat"),m=l.querySelector(".btn.congrat"),f=l.querySelector(".ipt-txt.regret"),h=l.querySelector(".btn.regret");l.classList.remove("hidden"),u=new Array(i),e(function(){r(),l.appendChild(d),a.onclick=function(){o()},m.onclick=function(){t=+s.value,u.filter(function(e){return e.index===t}).map(function(e){l.removeChild(e.dom)}),u=u.filter(function(e){return e.index!==t})},h.onclick=function(){t=+f.value,c=n(t),l.appendChild(c),u.push({index:t,dom:c})}})}function n(e){var t=document.createElement("div");return t.className="member",t.innerText=e,d.appendChild(t),t}function r(){if(c)u=c.map(function(e){return{index:e,dom:n(e,d)}});else for(var e=0,t=u.length;e<t;e++)u[e]={index:e+1,dom:n(e+1,d)}}function o(){function e(e){return e<o-1?e+1:0}function t(){r<10?n=setTimeout(function(){clearTimeout(n),u[a].dom.classList.remove("current"),a=e(a),u[a].dom.classList.add("current"),t()},Math.pow(2,r+=Math.random()/Math.pow(7,Math.sqrt(Math.random())))):(clearTimeout(n),u[a].dom.classList.add("flash"),u[a].dom.addEventListener("animationend",function e(){this.classList.remove("flash"),this.removeEventListener("animationend",e)}))}var n,r=0,o=u.length;t()}var i,c,u,a=0,l=document.querySelector(".page.game"),d=document.createDocumentFragment();return{init:function(e){i=e.sum,c=e.history,t()}}}function n(){var e,n,r=document.querySelector(".random"),o=r.querySelector(".page.welcome"),i=r.querySelector(".btn.start"),c=r.querySelector(".btn.setting"),u=r.querySelector(".btn.exit"),a=r.querySelector(".dialog.setting"),l=r.querySelector(".btn.sure"),d=r.querySelector(".sum"),s=r.querySelector(".history"),m=+d.value;i.onclick=function(){o.classList.add("hidden"),t().init({sum:m,history:e})},c.onclick=function(){a.classList.toggle("hidden")},u.onclick=function(){document.body.removeChild(r)},l.onclick=function(){m=+d.value,n=s.value.replace(/\s/g,""),e=n?n.split(",").map(function(e){return+e}):void 0,a.classList.add("hidden")}}n()}Random();